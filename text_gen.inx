<?xml version="1.0" encoding="UTF-8"?>
<inkscape-extension xmlns="http://www.inkscape.org/namespace/inkscape/extension">
    <name>AI Text Generator (Local LLM)</name>
    <id>com.youvenz.textgen</id>
    
    <param name="tab" type="notebook">
        <!-- Mode Tab -->
        <page name="mode" gui-text="Mode">
            <label appearance="header">Operation Mode</label>
            <param name="operation_mode" type="optiongroup" appearance="combo" gui-text="Mode:">
                <option value="create">Create New Text</option>
                <option value="modify">Modify Selected Text</option>
                <option value="translate">Translate Selected Text</option>
                <option value="summarize">Summarize Selected Text</option>
                <option value="expand">Expand Selected Text</option>
                <option value="rewrite">Rewrite Selected Text</option>
            </param>
            <spacer/>
            <label>Create Mode: Generate new text from a prompt</label>
            <label>Modify Mode: Change selected text based on instructions</label>
            <label>Translate Mode: Translate to target language</label>
            <label>Summarize Mode: Make text shorter and concise</label>
            <label>Expand Mode: Add more detail and examples</label>
            <label>Rewrite Mode: Improve grammar and clarity</label>
        </page>
        
        <!-- API Configuration Tab -->
        <page name="api_config" gui-text="API Config">
            <label appearance="header">Local LLM Configuration</label>
            <param name="api_provider" type="optiongroup" appearance="combo" gui-text="Provider:">
                <option value="ollama">Ollama</option>
                <option value="llamafile">llamafile</option>
                <option value="custom">Custom (OpenAI-compatible)</option>
            </param>
            <param name="api_url" type="string" gui-text="API URL:">http://localhost:11434</param>
            <spacer/>
            <label>Model Configuration:</label>
            <param name="auto_detect_model" type="bool" gui-text="Auto-detect model">true</param>
            <param name="local_model" type="string" gui-text="Model name (if not auto-detected):"></param>
            <spacer/>
            <label>Common URLs:</label>
            <label>• Ollama: http://localhost:11434</label>
            <label>• llamafile: http://localhost:8080</label>
            <spacer/>
            <label>Make sure your local LLM server is running before use!</label>
        </page>
        
        <!-- Prompt Tab -->
        <page name="prompt" gui-text="Prompt">
            <label appearance="header">Text Generation Prompt</label>
            <param name="prompt" type="string" gui-text="Your prompt:" gui-description="Enter what you want to generate or how to modify the text">Write a professional email greeting</param>
            <spacer/>
            <label>Target Language (for translation mode):</label>
            <param name="target_language" type="optiongroup" appearance="combo" gui-text="Target Language:">
                <option value="French">French</option>
                <option value="Spanish">Spanish</option>
                <option value="German">German</option>
                <option value="Italian">Italian</option>
                <option value="Portuguese">Portuguese</option>
                <option value="Chinese">Chinese</option>
                <option value="Japanese">Japanese</option>
                <option value="Korean">Korean</option>
                <option value="Arabic">Arabic</option>
                <option value="Russian">Russian</option>
                <option value="Dutch">Dutch</option>
                <option value="Polish">Polish</option>
                <option value="Turkish">Turkish</option>
                <option value="Swedish">Swedish</option>
                <option value="Danish">Danish</option>
                <option value="Norwegian">Norwegian</option>
                <option value="Finnish">Finnish</option>
            </param>
            <spacer/>
            <label>Tone/Style:</label>
            <param name="tone" type="optiongroup" appearance="combo" gui-text="Tone:">
                <option value="none">Default</option>
                <option value="formal">Formal</option>
                <option value="casual">Casual</option>
                <option value="professional">Professional</option>
                <option value="friendly">Friendly</option>
                <option value="enthusiastic">Enthusiastic</option>
                <option value="humorous">Humorous</option>
                <option value="serious">Serious</option>
                <option value="poetic">Poetic</option>
            </param>
        </page>
        
        <!-- Text Style Tab -->
        <page name="style" gui-text="Text Style">
            <label appearance="header">Typography</label>
            <param name="font_family" type="string" gui-text="Font Family:">Arial</param>
            <param name="font_size" type="int" min="6" max="500" gui-text="Font Size (px):">24</param>
            <param name="text_scale" type="float" min="0.1" max="10.0" precision="2" gui-text="Scale Multiplier:">1.0</param>
            <spacer/>
            <param name="font_weight" type="optiongroup" appearance="combo" gui-text="Font Weight:">
                <option value="normal">Normal</option>
                <option value="bold">Bold</option>
                <option value="lighter">Lighter</option>
                <option value="bolder">Bolder</option>
                <option value="100">100 (Thin)</option>
                <option value="200">200 (Extra Light)</option>
                <option value="300">300 (Light)</option>
                <option value="400">400 (Normal)</option>
                <option value="500">500 (Medium)</option>
                <option value="600">600 (Semi Bold)</option>
                <option value="700">700 (Bold)</option>
                <option value="800">800 (Extra Bold)</option>
                <option value="900">900 (Black)</option>
            </param>
            <param name="font_style" type="optiongroup" appearance="combo" gui-text="Font Style:">
                <option value="normal">Normal</option>
                <option value="italic">Italic</option>
                <option value="oblique">Oblique</option>
            </param>
            <param name="text_decoration" type="optiongroup" appearance="combo" gui-text="Text Decoration:">
                <option value="none">None</option>
                <option value="underline">Underline</option>
                <option value="overline">Overline</option>
                <option value="line-through">Line-through</option>
            </param>
        </page>
        
        <!-- Color Tab -->
        <page name="color" gui-text="Color">
            <label appearance="header">Text Color</label>
            <param name="text_color" type="color" gui-text="Text Color:">#000000FF</param>
            <spacer/>
            <label appearance="header">Background (Optional)</label>
            <param name="use_background" type="bool" gui-text="Add background rectangle">false</param>
            <param name="bg_color" type="color" gui-text="Background Color:">#FFFFFFFF</param>
            <param name="bg_opacity" type="float" min="0.0" max="1.0" precision="2" gui-text="Background Opacity:">0.8</param>
            <param name="bg_padding" type="int" min="0" max="100" gui-text="Padding (px):">10</param>
        </page>
        
        <!-- Layout Tab -->
        <page name="layout" gui-text="Layout">
            <label appearance="header">Position</label>
            <param name="position_mode" type="optiongroup" appearance="combo" gui-text="Position:">
                <option value="center">Center</option>
                <option value="top_left">Top Left</option>
                <option value="top_center">Top Center</option>
                <option value="top_right">Top Right</option>
                <option value="middle_left">Middle Left</option>
                <option value="middle_right">Middle Right</option>
                <option value="bottom_left">Bottom Left</option>
                <option value="bottom_center">Bottom Center</option>
                <option value="bottom_right">Bottom Right</option>
                <option value="cursor">At Selection/Cursor</option>
            </param>
            <param name="x_offset" type="float" min="-10000" max="10000" gui-text="X Offset (px):">0</param>
            <param name="y_offset" type="float" min="-10000" max="10000" gui-text="Y Offset (px):">0</param>
            <spacer/>
            <label appearance="header">Text Alignment</label>
            <param name="text_align" type="optiongroup" appearance="combo" gui-text="Horizontal Align:">
                <option value="start">Left</option>
                <option value="middle">Center</option>
                <option value="end">Right</option>
            </param>
            <spacer/>
            <label appearance="header">Spacing</label>
            <param name="max_width" type="int" min="50" max="5000" gui-text="Max Width (px):">600</param>
            <param name="line_height" type="float" min="0.5" max="5.0" precision="1" gui-text="Line Height:">1.2</param>
            <param name="letter_spacing" type="float" min="-50" max="50" precision="1" gui-text="Letter Spacing (px):">0</param>
            <param name="word_spacing" type="float" min="-50" max="50" precision="1" gui-text="Word Spacing (px):">0</param>
        </page>
        
        <!-- Advanced Tab -->
        <page name="advanced" gui-text="Advanced">
            <label appearance="header">LLM Parameters</label>
            <param name="temperature" type="float" min="0.0" max="2.0" precision="2" gui-text="Temperature:">0.7</param>
            <label>Lower = More focused, Higher = More creative</label>
            <spacer/>
            <param name="max_tokens" type="int" min="10" max="4000" gui-text="Max Tokens:">500</param>
            <label>Maximum length of generated text</label>
            <spacer/>
            <label appearance="header">Text Processing</label>
            <param name="preserve_style" type="bool" gui-text="Preserve original style when modifying">true</param>
            <param name="remove_asterisks" type="bool" gui-text="Remove markdown asterisks (**)">true</param>
            <param name="remove_quotes" type="bool" gui-text="Remove surrounding quotes">true</param>
            <param name="capitalize_first" type="bool" gui-text="Capitalize first letter">false</param>
            <spacer/>
            <label appearance="header">Experimental</label>
            <param name="stream_response" type="bool" gui-text="Stream response (experimental)">false</param>
            <label>Note: Streaming may not work with all providers</label>
        </page>
        
        <!-- Help Tab -->
        <page name="help" gui-text="Help">
            <label appearance="header">Quick Start Guide</label>
            <label>1. Install and start a local LLM:</label>
            <label>   • Ollama: https://ollama.ai</label>
            <label>   • llamafile: https://github.com/Mozilla-Ocho/llamafile</label>
            <spacer/>
            <label>2. Configure API settings in 'API Config' tab</label>
            <label>3. Choose operation mode in 'Mode' tab</label>
            <label>4. Enter your prompt in 'Prompt' tab</label>
            <label>5. Customize style and layout (optional)</label>
            <label>6. Click Apply to generate text</label>
            <spacer/>
            <label appearance="header">Ollama Setup</label>
            <label>Install: https://ollama.ai/download</label>
            <label>Start server: ollama serve</label>
            <label>Pull a model: ollama pull llama2</label>
            <label>Default URL: http://localhost:11434</label>
            <spacer/>
            <label appearance="header">llamafile Setup</label>
            <label>Download from: https://github.com/Mozilla-Ocho/llamafile</label>
            <label>Make executable: chmod +x llamafile</label>
            <label>Run: ./llamafile</label>
            <label>Default URL: http://localhost:8080</label>
            <spacer/>
            <label appearance="header">Tips</label>
            <label>• Be specific in your prompts</label>
            <label>• Use 'Modify' mode to refine existing text</label>
            <label>• Adjust temperature for creativity vs consistency</label>
            <label>• Enable auto-detect to find models automatically</label>
            <spacer/>
            <label>Version: 2.0.0</label>
            <label>Author: YouvenZ</label>
        </page>
    </param>
    
    <effect>
        <object-type>all</object-type>
        <effects-menu>
            <submenu name="Text"/>
        </effects-menu>
    </effect>
    
    <script>
        <command location="inx" interpreter="python">text_gen.py</command>
    </script>
</inkscape-extension>